<template>
    <!-- Header -->
    <div>
        <h1>üöö Delivery Planning Dashboard</h1>
        <div>
            <button><span>‚Üª</span>Refresh</button>
            <button><span>üìä</span>Reports</button>
            <button><span>‚öôÔ∏è</span>Settings</button>
        </div>
    </div>

    <!-- Setting for main page -->
    <div>
        <div class="left-side">
            <div class="form-group">
                <p>Customer:</p>
                <select>
                    <option value="all">All Customers</option>
                    <option value="KKB">KKB</option>
                    <option value="SKCN">SKCN</option>
                    <option value="PTT">PTT</option>
                    <option value="CSD">CSD</option>
                    <option value="BTA">BTA</option>
                    <option value="VCST">VCST</option>
                </select>
            </div>
            <div class="form-group">
                <p>Product Type:</p>
                <select>
                    <option value="all">All Products</option>
                    <option value="DISC">DISC</option>
                    <option value="DOZER BLADE">DOZER BLADE</option>
                    <option value="PLOUGH">PLOUGH</option>
                    <option value="SCREW">SCREW</option>
                </select>
            </div>

            <div class="form-group">
                <p>Week</p>
                <input type="week" value="2025-W47">
            </div>

        </div>
        <div class="right-side">
            <div class="">
                <span>28</span>
                Pending
            </div>
            <div class="">
                <span>42</span>
                Scheduled
            </div>
            <div class="">
                <span>87%</span>

            </div>
        </div>

    </div>

    <!-- Marker Capacity -->
    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background: #0176d3;"></div>
            <span>Scheduled</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #2e844a;"></div>
            <span>Under Capacity</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #ffa500;"></div>
            <span>Near Capacity</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #c23934;"></div>
            <span>At Capacity</span>
        </div>
    </div>


    <div class="scheduler-container">

        <!-- LEFT SIDE - ORDERS -->
        <div class="orders-panel">
            <div class="panel-header">Pending Fulfillment Order Product Item</div>

            <template for:each={orders} for:item="o">
                <div key={o.id} class="order-card" draggable="true" data-id={o.id} ondragstart={handleDragStart}>
                    <div class="order-id">{o.name}</div>
                    <div class="order-info">
                        {o.customer} - {o.productName} <br />
                        Quantity: {o.quantity}
                    </div>
                    <div class="order-weight">{o.weight} kg</div>
                </div>
            </template>
        </div>

        <!-- RIGHT SIDE - CALENDAR -->
        <div class="calendar-panel">
            <template for:each={calendarData} for:item="day">
                <div key={day.date} class="day-column">

                    <div class="day-header">
                        <div class="day-name">{day.dayName}</div>
                        <div class="day-date">{day.date}</div>
                    </div>

                    <template for:each={day.trucks} for:item="t">
                        <div key={t.truckId} class="truck-card" data-truck-id={t.truckId} data-date={day.date}
                            ondragover={handleDragOver} ondrop={handleDrop}>

                            <div class="truck-header">
                                <div class="truck-name">Truck {t.truckId}</div>
                                <div class="truck-capacity">{t.capacity} kg</div>
                            </div>

                            <div class="truck-orders">
                                <template for:each={t.assignedOrders} for:item="ord">
                                    <div key={ord} class="assigned-order">
                                        FI-{ord}
                                    </div>
                                </template>

                                <template if:true={t.isEmpty}>
                                    <div class="empty-hint">Drop orders here</div>
                                </template>
                            </div>

                        </div>
                    </template>
                </div>
            </template>
        </div>

    </div>
</template>